"use strict";(self["webpackChunksharemap_manage"]=self["webpackChunksharemap_manage"]||[]).push([[918],{1918:function(e,o,s){s.r(o),s.d(o,{default:function(){return f}});var a=s(3396),r=s(6949);const l=e=>((0,a.dD)("data-v-191a5d26"),e=e(),(0,a.Cn)(),e),n={class:"login_container"},t={class:"login_box"},i=l((()=>(0,a._)("div",{class:"avator_box"},[(0,a._)("img",{src:r,alt:"logo"})],-1))),d=(0,a.Uk)("Log In"),u=(0,a.Uk)("Reset");function m(e,o,s,r,l,m){const p=(0,a.up)("el-input"),c=(0,a.up)("el-form-item"),g=(0,a.up)("el-button"),w=(0,a.up)("el-form");return(0,a.wg)(),(0,a.iD)("div",n,[(0,a._)("div",t,[i,(0,a.Wm)(w,{ref:"loginFormRef",model:r.loginForm,rules:r.loginFormRules,"label-width":"120",class:"login_form","hide-required-asterisk":"false"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{label:"Username:",prop:"username"},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{modelValue:r.loginForm.username,"onUpdate:modelValue":o[0]||(o[0]=e=>r.loginForm.username=e),placeholder:"Please input Email address","prefix-icon":e.Search},null,8,["modelValue","prefix-icon"])])),_:1}),(0,a.Wm)(c,{label:"Password:",prop:"password"},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{modelValue:r.loginForm.password,"onUpdate:modelValue":o[1]||(o[1]=e=>r.loginForm.password=e),type:"password",placeholder:"Please input password","show-password":"","prefix-icon":e.icon-e.password},null,8,["modelValue","prefix-icon"])])),_:1}),(0,a.Wm)(c,{class:"btns"},{default:(0,a.w5)((()=>[(0,a.Wm)(g,{type:"primary",onClick:r.login},{default:(0,a.w5)((()=>[d])),_:1},8,["onClick"]),(0,a.Wm)(g,{type:"info",onClick:r.resetLoginForm},{default:(0,a.w5)((()=>[u])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model","rules"])])])}s(1703);var p=s(4870),c={setup(){const e=(0,p.iH)(),o=(0,p.qj)({username:"",password:""}),s=(0,p.qj)({username:[{required:!0,message:"Please input a valid account",trigger:"blur"}],password:[{required:!0,message:"Please input password",trigger:"blur"}]}),r=()=>{const o=(0,p.SU)(e);o.resetFields()},{proxy:l}=(0,a.FN)(),n=async()=>{const s=(0,p.SU)(e);s&&await s.validate(((e,s)=>{if(e){const e="https://annielyticx-gamedataauth.azurewebsites.net/oauth/token",s="username="+o.username+"&password="+o.password+"&grant_type=password";fetch(e,{method:"post",body:s,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((e=>{if(console.log(e),!e.ok)throw new Error("Failed to login"+e.status);return e.json()})).then((e=>{console.log(e);const o=e.access_token;window.sessionStorage.setItem("token",o),l.$router.push("/home")})).catch((e=>{alert("Failed to login :"+e)}))}else console.log("error submit!",s)}))};return{loginFormRef:e,loginForm:o,loginFormRules:s,resetLoginForm:r,login:n}}},g=s(89);const w=(0,g.Z)(c,[["render",m],["__scopeId","data-v-191a5d26"]]);var f=w}}]);
//# sourceMappingURL=918.ab1e3278.js.map