{"version":3,"file":"js/918.ab1e3278.js","mappings":"iQACKA,MAAM,mB,GACJA,MAAM,a,UAETC,EAAAA,EAAAA,GAEM,OAFDD,MAAM,cAAY,EACrBC,EAAAA,EAAAA,GAAyC,OAApCC,IAAAC,EAAyBC,IAAI,WADpC,K,WAc6C,U,WACM,S,gJAlBvDC,EAAAA,EAAAA,IAsBM,MAtBN,EAsBM,EArBJJ,EAAAA,EAAAA,GAoBM,MApBN,EAoBM,CAlBJK,GAGAC,EAAAA,EAAAA,IAcUC,EAAA,CAdDC,IAAI,eAAgBC,MAAOC,EAAAA,UAAYC,MAAOD,EAAAA,eAAgB,cAAY,MAAMX,MAAM,aAAa,yBAAuB,SAAnI,C,kBAEE,IAEe,EAFfO,EAAAA,EAAAA,IAEeM,EAAA,CAFDC,MAAQ,YAAYC,KAAK,YAAvC,C,kBACE,IAAuG,EAAvGR,EAAAA,EAAAA,IAAuGS,EAAA,C,WAApFL,EAAAA,UAAUM,S,qCAAVN,EAAAA,UAAUM,SAAQC,GAAEC,YAAY,6BAA8B,cAAaC,EAAAA,QAA9F,wC,OAGFb,EAAAA,EAAAA,IAEeM,EAAA,CAFDC,MAAQ,YAAYC,KAAK,YAAvC,C,kBACE,IAAuI,EAAvIR,EAAAA,EAAAA,IAAuIS,EAAA,C,WAApHL,EAAAA,UAAUU,S,qCAAVV,EAAAA,UAAUU,SAAQH,GAAEI,KAAK,WAAWH,YAAY,wBAAwB,mBAAe,cAAaC,EAAAA,KAAKA,EAAAA,UAA5H,wC,OAGFb,EAAAA,EAAAA,IAGeM,EAAA,CAHDb,MAAM,QAAM,C,kBACxB,IAA2D,EAA3DO,EAAAA,EAAAA,IAA2DgB,EAAA,CAAhDD,KAAK,UAAWE,QAAOb,EAAAA,OAAlC,C,kBAAyC,IAAM,M,KAA/C,gBACAJ,EAAAA,EAAAA,IAAgEgB,EAAA,CAArDD,KAAK,OAAQE,QAAOb,EAAAA,gBAA/B,C,kBAA+C,IAAK,M,KAApD,kB,cAZJ,yB,sBAqBJ,GACEc,QACE,MAAMC,GAAejB,EAAAA,EAAAA,MACfkB,GAAYC,EAAAA,EAAAA,IAAS,CACzBX,SAAU,GACVI,SAAU,KAENQ,GAAiBD,EAAAA,EAAAA,IAAS,CAC9BX,SAAU,CACR,CAAEa,UAAU,EAAMC,QAAS,+BAAgCC,QAAS,SAEtEX,SAAU,CACR,CAAES,UAAU,EAAMC,QAAS,wBAAyBC,QAAS,WAI3DC,EAAiB,KACrB,MAAMC,GAASC,EAAAA,EAAAA,IAAMT,GACrBQ,EAAOE,gBAGH,MAAEC,IAAUC,EAAAA,EAAAA,MACZC,EAAQC,UACZ,MAAMN,GAASC,EAAAA,EAAAA,IAAMT,GAChBQ,SACCA,EAAOO,UAAS,CAACC,EAAOC,KAC5B,GAAID,EAAO,CACT,MAAME,EAAW,iEACXC,EAAO,YAAclB,EAAUV,SAAW,aAAeU,EAAUN,SAAW,uBACpFyB,MAAMF,EAAU,CACdG,OAAQ,OACRF,KAAMA,EACNG,QAAS,CACP,eAAgB,uCAEjBC,MAAKC,IAEN,GADAC,QAAQC,IAAIF,IACPA,EAASG,GACZ,MAAM,IAAIC,MAAM,kBAAoBJ,EAASK,QAE/C,OAAOL,EAASM,UACfP,MAAKQ,IACNN,QAAQC,IAAIK,GACZ,MAAMC,EAAQD,EAAOE,aACrBC,OAAOC,eAAeC,QAAQ,QAASJ,GACvCrB,EAAM0B,QAAQC,KAAK,YAClBC,OAAMC,IACPC,MAAM,oBAAsBD,WAG9Bf,QAAQC,IAAI,gBAAiBT,OAInC,MAAO,CACLjB,aAAAA,EAAcC,UAAAA,EAAWE,eAAAA,EAAgBI,eAAAA,EAAgBM,MAAAA,K,QC5E/D,MAAM6B,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAEzF","sources":["webpack://sharemap_manage/./src/views/LoginView.vue","webpack://sharemap_manage/./src/views/LoginView.vue?5755"],"sourcesContent":["<template>\n<div class=\"login_container\">\n  <div class=\"login_box\">\n    <!-- logo image -->\n    <div class=\"avator_box\">\n      <img src=\"../assets/logo.png\" alt=\"logo\">\n    </div>\n    <el-form ref=\"loginFormRef\" :model=\"loginForm\" :rules=\"loginFormRules\" label-width=\"120\" class=\"login_form\" hide-required-asterisk=false>\n      <!-- username -->\n      <el-form-item label = \"Username:\" prop=\"username\">\n        <el-input v-model=\"loginForm.username\" placeholder=\"Please input Email address\" :prefix-icon=\"Search\"/>\n      </el-form-item>\n        <!-- password -->\n      <el-form-item label = \"Password:\" prop=\"password\">\n        <el-input v-model=\"loginForm.password\" type=\"password\" placeholder=\"Please input password\" show-password :prefix-icon=\"icon-password\"/>\n      </el-form-item>\n        <!-- buttons -->\n      <el-form-item class=\"btns\">\n        <el-button type=\"primary\" @click=\"login\">Log In</el-button>\n        <el-button type=\"info\" @click=\"resetLoginForm\">Reset</el-button>\n      </el-form-item>\n    </el-form>\n  </div>\n</div>\n</template>\n\n<script>\nimport { getCurrentInstance, reactive, ref, unref } from 'vue'\nexport default {\n  setup () {\n    const loginFormRef = ref()\n    const loginForm = reactive({\n      username: '',\n      password: ''\n    })\n    const loginFormRules = reactive({\n      username: [\n        { required: true, message: 'Please input a valid account', trigger: 'blur' }\n      ],\n      password: [\n        { required: true, message: 'Please input password', trigger: 'blur' }\n      ]\n    })\n\n    const resetLoginForm = () => {\n      const formEl = unref(loginFormRef)\n      formEl.resetFields()\n    }\n\n    const { proxy } = getCurrentInstance()\n    const login = async () => {\n      const formEl = unref(loginFormRef)\n      if (!formEl) return\n      await formEl.validate((valid, fields) => {\n        if (valid) {\n          const loginUrl = 'https://annielyticx-gamedataauth.azurewebsites.net/oauth/token'\n          const body = 'username=' + loginForm.username + '&password=' + loginForm.password + '&grant_type=password'\n          fetch(loginUrl, {\n            method: 'post',\n            body: body,\n            headers: {\n              'Content-Type': 'application/x-www-form-urlencoded'\n            }\n          }).then(response => {\n            console.log(response)\n            if (!response.ok) {\n              throw new Error('Failed to login' + response.status)\n            }\n            return response.json()\n          }).then(result => {\n            console.log(result)\n            const token = result.access_token\n            window.sessionStorage.setItem('token', token)\n            proxy.$router.push('/home')\n          }).catch(error => {\n            alert('Failed to login :' + error)\n          })\n        } else {\n          console.log('error submit!', fields)\n        }\n      })\n    }\n    return {\n      loginFormRef, loginForm, loginFormRules, resetLoginForm, login\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.login_container {\n    background-color: #2b4b6b;\n    height: 100%;\n}\n\n.login_box {\n    width: 450px;\n    height: 300px;\n    background-color: white;\n    border-radius: 3px;\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    transform: translate(-50%, -50%);\n}\n\n.avator_box {\n    height: 130px;\n    width: 130px;\n    border: 1px solid #eee;\n    border-radius: 50%;\n    padding: 10px;\n    box-shadow: 0 0 10px #ddd;\n    position: absolute;\n    left: 50%;\n    top: -50%;\n    transform: translate(-50%, 50%);\n    background-color: #fff;\n    img {\n        width: 100%;\n        height: 100%;\n        border-radius: 50%;\n        background-color: #eee;\n    }\n}\n\n.login_form {\n    position: absolute;\n    bottom: 0;\n    width: 100%;\n    padding: 0 20px;\n    box-sizing: border-box;\n}\n\n.btns {\n    display: flex;\n    justify-content: flex-end;\n    float: right;\n}\n</style>\n","import { render } from \"./LoginView.vue?vue&type=template&id=191a5d26&scoped=true\"\nimport script from \"./LoginView.vue?vue&type=script&lang=js\"\nexport * from \"./LoginView.vue?vue&type=script&lang=js\"\n\nimport \"./LoginView.vue?vue&type=style&index=0&id=191a5d26&lang=less&scoped=true\"\n\nimport exportComponent from \"/Volumes/iMacDisk/Users/Shared/GitHub/StudyLog/sharemap_manage/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-191a5d26\"]])\n\nexport default __exports__"],"names":["class","_createElementVNode","src","_imports_0","alt","_createElementBlock","_hoisted_3","_createVNode","_component_el_form","ref","model","$setup","rules","_component_el_form_item","label","prop","_component_el_input","username","$event","placeholder","_ctx","password","type","_component_el_button","onClick","setup","loginFormRef","loginForm","reactive","loginFormRules","required","message","trigger","resetLoginForm","formEl","unref","resetFields","proxy","getCurrentInstance","login","async","validate","valid","fields","loginUrl","body","fetch","method","headers","then","response","console","log","ok","Error","status","json","result","token","access_token","window","sessionStorage","setItem","$router","push","catch","error","alert","__exports__","render"],"sourceRoot":""}