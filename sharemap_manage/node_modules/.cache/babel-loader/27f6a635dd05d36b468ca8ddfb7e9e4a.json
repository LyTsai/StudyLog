{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nimport _imports_0 from '../assets/logo.png';\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-5c6101e4\"), n = n(), _popScopeId(), n);\n\nconst _hoisted_1 = {\n  class: \"login_container\"\n};\nconst _hoisted_2 = {\n  class: \"login_box\"\n};\n\nconst _hoisted_3 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"avator_box\"\n}, [/*#__PURE__*/_createElementVNode(\"img\", {\n  src: _imports_0,\n  alt: \"logo\"\n})], -1\n/* HOISTED */\n));\n\nconst _hoisted_4 = /*#__PURE__*/_createTextVNode(\"Log In\");\n\nconst _hoisted_5 = /*#__PURE__*/_createTextVNode(\"Reset\");\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_input = _resolveComponent(\"el-input\");\n\n  const _component_el_form_item = _resolveComponent(\"el-form-item\");\n\n  const _component_el_button = _resolveComponent(\"el-button\");\n\n  const _component_el_form = _resolveComponent(\"el-form\");\n\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createCommentVNode(\" logo image \"), _hoisted_3, _createVNode(_component_el_form, {\n    ref: \"loginFormRef\",\n    model: $data.loginForm,\n    rules: $data.loginFormRules,\n    \"label-width\": \"50\",\n    class: \"login_form\"\n  }, {\n    default: _withCtx(() => [_createCommentVNode(\" username \"), _createVNode(_component_el_form_item, {\n      prop: \"username\",\n      label: \"UserName\",\n      req: \"\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_input, {\n        modelValue: $data.loginForm.username,\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.loginForm.username = $event),\n        placeholder: \"Please input Email adress\",\n        \"prefix-icon\": _ctx.Search\n      }, null, 8\n      /* PROPS */\n      , [\"modelValue\", \"prefix-icon\"])]),\n      _: 1\n      /* STABLE */\n\n    }), _createCommentVNode(\" password \"), _createVNode(_component_el_form_item, {\n      prop: \"password\",\n      label: \"password\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_input, {\n        modelValue: $data.loginForm.password,\n        \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.loginForm.password = $event),\n        type: \"password\",\n        placeholder: \"Please input password\",\n        \"show-password\": \"\",\n        \"prefix-icon\": _ctx.icon - _ctx.password\n      }, null, 8\n      /* PROPS */\n      , [\"modelValue\", \"prefix-icon\"])]),\n      _: 1\n      /* STABLE */\n\n    }), _createCommentVNode(\" buttons \"), _createVNode(_component_el_form_item, {\n      class: \"btns\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_button, {\n        type: \"primary\",\n        onClick: $options.login\n      }, {\n        default: _withCtx(() => [_hoisted_4]),\n        _: 1\n        /* STABLE */\n\n      }, 8\n      /* PROPS */\n      , [\"onClick\"]), _createVNode(_component_el_button, {\n        type: \"info\",\n        onClick: $options.resetLoginForm\n      }, {\n        default: _withCtx(() => [_hoisted_5]),\n        _: 1\n        /* STABLE */\n\n      }, 8\n      /* PROPS */\n      , [\"onClick\"])]),\n      _: 1\n      /* STABLE */\n\n    })]),\n    _: 1\n    /* STABLE */\n\n  }, 8\n  /* PROPS */\n  , [\"model\", \"rules\"])])]);\n}","map":{"version":3,"mappings":";OAKWA,gBAAwB;;;;;AAJ9BC,OAAK,EAAC;;;AACJA,OAAK,EAAC;;;gEAETC,oBAEM,KAFN,EAEM;AAFDD,OAAK,EAAC;AAEL,CAFN,EAAuB,cACrBC,oBAAyC,KAAzC,EAAyC;AAApCC,KAAwB,EAAxBH,UAAoC;AAAXI,KAAG,EAAC;AAAO,CAAzC,CADqB,CAAvB;;AAAA;;iDAc6C;;iDACM;;;;;;;;;;;uBAlBvDC,oBAsBM,KAtBN,cAsBM,CArBJH,oBAoBM,KApBN,cAoBM,CAnBJI,mCAmBI,EAlBJC,UAkBI,EAfJC,aAcUC,kBAdV,EAcU;AAdDC,OAAG,EAAC,cAcH;AAdmBC,SAAK,EAAEC,eAc1B;AAdsCC,SAAK,EAAED,oBAc7C;AAd6D,mBAAY,IAczE;AAd8EX,SAAK,EAAC;AAcpF,GAdV;sBACE,MAAiB,CAAjBK,iCAAiB,EACjBE,aAEeM,uBAFf,EAEe;AAFDC,UAAI,EAAC,UAEJ;AAFeC,WAAK,EAAC,UAErB;AAFgCC,SAAG,EAAH;AAEhC,KAFf;wBACE,MAAsG,CAAtGT,aAAsGU,mBAAtG,EAAsG;oBAAnFN,gBAAUO,QAAyE;mEAAnFP,gBAAUO,WAAQC,OAAiE;AAA/DC,mBAAW,EAAC,2BAAmD;AAAtB,uBAAaC;AAAS,OAAtG;;AAAA,sCAAsG;;;;KADxG,CADiB,EAIfhB,iCAJe,EAKjBE,aAEeM,uBAFf,EAEe;AAFDC,UAAI,EAAC,UAEJ;AAFeC,WAAK,EAAC;AAErB,KAFf;wBACE,MAAuI,CAAvIR,aAAuIU,mBAAvI,EAAuI;oBAApHN,gBAAUW,QAA0G;mEAApHX,gBAAUW,WAAQH,OAAkG;AAAhGI,YAAI,EAAC,UAA2F;AAAhFH,mBAAW,EAAC,uBAAoE;AAA5C,2BAA4C;AAA7B,uBAAaC,YAAKA;AAAW,OAAvI;;AAAA,sCAAuI;;;;KADzI,CALiB,EAQfhB,gCARe,EASjBE,aAGeM,uBAHf,EAGe;AAHDb,WAAK,EAAC;AAGL,KAHf,EAA0B;wBACxB,MAA2D,CAA3DO,aAA2DiB,oBAA3D,EAA2D;AAAhDD,YAAI,EAAC,SAA2C;AAAhCE,eAAK,EAAEC;AAAyB,OAA3D;0BAAyC,MAAM;;;;OAA/C;;AAAA,oBAA2D,EAC3DnB,aAAgEiB,oBAAhE,EAAgE;AAArDD,YAAI,EAAC,MAAgD;AAAxCE,eAAK,EAAEC;AAAiC,OAAhE;0BAA+C,MAAK;;;;OAApD;;AAAA,oBAD2D,EADnC;;;;AAAA,KAA1B,CATiB;;;;GADnB;;AAAA,uBAeI,CApBN,CAqBI,CAtBN","names":["_imports_0","class","_createElementVNode","src","alt","_createElementBlock","_createCommentVNode","_hoisted_3","_createVNode","_component_el_form","ref","model","$data","rules","_component_el_form_item","prop","label","req","_component_el_input","username","$event","placeholder","_ctx","password","type","_component_el_button","onClick","$options"],"sourceRoot":"","sources":["/Volumes/iMacDisk/Users/Shared/GitHub/StudyLog/sharemap_manage/src/views/LoginView.vue"],"sourcesContent":["<template>\n<div class=\"login_container\">\n  <div class=\"login_box\">\n    <!-- logo image -->\n    <div class=\"avator_box\">\n      <img src=\"../assets/logo.png\" alt=\"logo\">\n    </div>\n    <el-form ref=\"loginFormRef\" :model=\"loginForm\" :rules=\"loginFormRules\" label-width=\"50\" class=\"login_form\">\n      <!-- username -->\n      <el-form-item prop=\"username\" label=\"UserName\" req>\n        <el-input v-model=\"loginForm.username\" placeholder=\"Please input Email adress\" :prefix-icon=\"Search\"/>\n      </el-form-item>\n        <!-- password -->\n      <el-form-item prop=\"password\" label=\"password\">\n        <el-input v-model=\"loginForm.password\" type=\"password\" placeholder=\"Please input password\" show-password :prefix-icon=\"icon-password\"/>\n      </el-form-item>\n        <!-- buttons -->\n      <el-form-item class=\"btns\">\n        <el-button type=\"primary\" @click=\"login\">Log In</el-button>\n        <el-button type=\"info\" @click=\"resetLoginForm\">Reset</el-button>\n      </el-form-item>\n    </el-form>\n  </div>\n</div>\n</template>\n\n<script>\n// import axios from 'axios'\nexport default {\n  data () {\n    return {\n      loginForm: {\n        username: '',\n        password: ''\n      },\n      loginFormRules: {\n        username: [\n          { required: true, message: 'Please input valid account', trigger: 'blur' }\n        ],\n        password: [\n          { required: true, message: 'Please input password', trigger: 'blur' }\n        ]\n      }\n    }\n  },\n  methods: {\n    resetLoginForm () {\n      this.$refs.loginFormRef.resetFields()\n    },\n    login () {\n      this.$refs.loginFormRef.validate(valid => {\n        if (!valid) return\n\n        const loginUrl = 'https://annielyticx-gamedataauth.azurewebsites.net/oauth/token'\n        const body = 'username=' + this.loginForm.username + '&password=' + this.loginForm.password + '&grant_type=password'\n        fetch(loginUrl, {\n          method: 'post',\n          body: body,\n          headers: {\n            'Content-Type': 'application/x-www-form-urlencoded'\n          }\n          // , mode: 'no-cors'\n        }).then(response => {\n          console.log(response)\n          if (!response.ok) {\n            throw new Error(response.status)\n          }\n          return response.json()\n        }).then(result => {\n          const token = result.access_token\n          window.sessionStorage.setItem('token', token)\n          this.$router.push('/home')\n        }).catch(error => {\n          alert('Failed to login :' + error)\n        })\n      })\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.login_container {\n    background-color: #2b4b6b;\n    height: 100%;\n}\n\n.login_box {\n    width: 450px;\n    height: 300px;\n    background-color: white;\n    border-radius: 3px;\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    transform: translate(-50%, -50%);\n}\n\n.avator_box {\n    height: 130px;\n    width: 130px;\n    border: 1px solid #eee;\n    border-radius: 50%;\n    padding: 10px;\n    box-shadow: 0 0 10px #ddd;\n    position: absolute;\n    left: 50%;\n    top: -50%;\n    transform: translate(-50%, 50%);\n    background-color: #fff;\n    img {\n        width: 100%;\n        height: 100%;\n        border-radius: 50%;\n        background-color: #eee;\n    }\n}\n\n.login_form {\n    position: absolute;\n    bottom: 0;\n    width: 100%;\n    padding: 0 20px;\n    box-sizing: border-box;\n}\n\n.btns {\n    display: flex;\n    justify-content: flex-end;\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}