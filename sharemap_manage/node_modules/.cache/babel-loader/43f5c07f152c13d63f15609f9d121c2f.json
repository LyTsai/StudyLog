{"ast":null,"code":"import axios from 'axios';\nexport default {\n  data() {\n    return {\n      loginForm: {\n        username: '',\n        password: '',\n        grant_type: 'password'\n      },\n      loginFormRules: {\n        username: [{\n          required: true,\n          message: 'Please input valid account',\n          trigger: 'blur'\n        }],\n        password: [{\n          required: true,\n          message: 'Please input password',\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n\n  methods: {\n    resetLoginForm() {\n      this.$refs.loginFormRef.resetFields();\n    },\n\n    login() {\n      this.$refs.loginFormRef.validate(async valid => {\n        if (!valid) return;\n        console.log(this.loginForm);\n        axios.defaults.baseURL = 'https://annielyticx-gamedataauth.azurewebsites.net/oauth/token';\n        axios.defaults.headers.common['Access-Control-Allow-Origin'] = '*';\n        axios.defaults.headers.post['Content-Type'] = 'application/json';\n\n        try {\n          const {\n            data: res\n          } = await axios.post('/', this.loginForm);\n          if (res.meta.status !== 200) return alert('Failed to Login');\n          alert('Success');\n          window.sessionStorage.setItem('token', res.data.token);\n          this.$router.push('/home');\n        } catch (error) {\n          alert(error);\n        }\n      });\n    }\n\n  }\n};","map":{"version":3,"mappings":"AA2BA,OAAOA,KAAP,MAAkB,OAAlB;AACA,eAAe;AACbC,MAAG,GAAK;AACN,WAAO;AACLC,eAAS,EAAE;AACTC,gBAAQ,EAAE,EADD;AAETC,gBAAQ,EAAE,EAFD;AAGTC,kBAAU,EAAE;AAHH,OADN;AAMLC,oBAAc,EAAE;AACdH,gBAAQ,EAAE,CACR;AAAEI,kBAAQ,EAAE,IAAZ;AAAkBC,iBAAO,EAAE,4BAA3B;AAAyDC,iBAAO,EAAE;AAAlE,SADQ,CADI;AAIdL,gBAAQ,EAAE,CACR;AAAEG,kBAAQ,EAAE,IAAZ;AAAkBC,iBAAO,EAAE,uBAA3B;AAAoDC,iBAAO,EAAE;AAA7D,SADQ;AAJI;AANX,KAAP;AAeD,GAjBY;;AAkBbC,SAAO,EAAE;AACPC,kBAAa,GAAK;AAChB,WAAKC,KAAL,CAAWC,YAAX,CAAwBC,WAAxB;AACD,KAHM;;AAIPC,SAAI,GAAK;AACP,WAAKH,KAAL,CAAWC,YAAX,CAAwBG,QAAxB,CAAiC,MAAMC,KAAN,IAAe;AAC9C,YAAI,CAACA,KAAL,EAAY;AACZC,eAAO,CAACC,GAAR,CAAY,KAAKjB,SAAjB;AACAF,aAAK,CAACoB,QAAN,CAAeC,OAAf,GAAyB,gEAAzB;AACArB,aAAK,CAACoB,QAAN,CAAeE,OAAf,CAAuBC,MAAvB,CAA8B,6BAA9B,IAA+D,GAA/D;AACAvB,aAAK,CAACoB,QAAN,CAAeE,OAAf,CAAuBE,IAAvB,CAA4B,cAA5B,IAA8C,kBAA9C;;AACA,YAAI;AACF,gBAAM;AAAEvB,gBAAI,EAAEwB;AAAR,cAAgB,MAAMzB,KAAK,CAACwB,IAAN,CAAW,GAAX,EAAgB,KAAKtB,SAArB,CAA5B;AACA,cAAIuB,GAAG,CAACC,IAAJ,CAASC,MAAT,KAAoB,GAAxB,EAA6B,OAAOC,KAAK,CAAC,iBAAD,CAAZ;AAC7BA,eAAK,CAAC,SAAD,CAAL;AACAC,gBAAM,CAACC,cAAP,CAAsBC,OAAtB,CAA8B,OAA9B,EAAuCN,GAAG,CAACxB,IAAJ,CAAS+B,KAAhD;AACA,eAAKC,OAAL,CAAaC,IAAb,CAAkB,OAAlB;AACF,SANA,CAME,OAAOC,KAAP,EAAc;AACdP,eAAK,CAACO,KAAD,CAAL;AACF;AACD,OAfD;AAgBF;;AArBO;AAlBI,CAAf","names":["axios","data","loginForm","username","password","grant_type","loginFormRules","required","message","trigger","methods","resetLoginForm","$refs","loginFormRef","resetFields","login","validate","valid","console","log","defaults","baseURL","headers","common","post","res","meta","status","alert","window","sessionStorage","setItem","token","$router","push","error"],"sourceRoot":"","sources":["/Users/l/Desktop/sharemap_manage/src/views/LoginView.vue"],"sourcesContent":["<template>\n<div class=\"login_container\">\n    <div class=\"login_box\">\n        <!-- logo image -->\n        <div class=\"avator_box\">\n            <img src=\"../assets/logo.png\" alt=\"logo\">\n        </div>\n        <el-form ref=\"loginFormRef\" :model=\"loginForm\" :rules=\"loginFormRules\" label-width=\"0\" class=\"login_form\">\n            <!-- username -->\n            <el-form-item prop=\"username\">UserName\n                <el-input v-model=\"loginForm.username\" placeholder=\"Please input Email adress\" :prefix-icon=\"Search\"/>\n            </el-form-item>\n            <!-- password -->\n            <el-form-item prop=\"password\">Password\n                <el-input v-model=\"loginForm.password\" type=\"password\" placeholder=\"Please input password\" show-password :prefix-icon=\"icon-password\"/>\n            </el-form-item>\n            <!-- buttons -->\n            <el-form-item class=\"btns\">\n                <el-button type=\"primary\" @click=\"login\">Log In</el-button>\n                <el-button type=\"info\" @click=\"resetLoginForm\">Reset</el-button>\n            </el-form-item>\n        </el-form>\n    </div>\n</div>\n</template>\n\n<script>\nimport axios from 'axios'\nexport default {\n  data () {\n    return {\n      loginForm: {\n        username: '',\n        password: '',\n        grant_type: 'password'\n      },\n      loginFormRules: {\n        username: [\n          { required: true, message: 'Please input valid account', trigger: 'blur' }\n        ],\n        password: [\n          { required: true, message: 'Please input password', trigger: 'blur' }\n        ]\n      }\n    }\n  },\n  methods: {\n    resetLoginForm () {\n      this.$refs.loginFormRef.resetFields()\n    },\n    login () {\n      this.$refs.loginFormRef.validate(async valid => {\n        if (!valid) return\n        console.log(this.loginForm)\n        axios.defaults.baseURL = 'https://annielyticx-gamedataauth.azurewebsites.net/oauth/token'\n        axios.defaults.headers.common['Access-Control-Allow-Origin'] = '*'\n        axios.defaults.headers.post['Content-Type'] = 'application/json'\n        try {\n          const { data: res } = await axios.post('/', this.loginForm)\n          if (res.meta.status !== 200) return alert('Failed to Login')\n          alert('Success')\n          window.sessionStorage.setItem('token', res.data.token)\n          this.$router.push('/home')\n        } catch (error) {\n          alert(error)\n        }\n      })\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.login_container {\n    background-color: #2b4b6b;\n    height: 100%;\n}\n\n.login_box {\n    width: 450px;\n    height: 300px;\n    background-color: white;\n    border-radius: 3px;\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    transform: translate(-50%, -50%);\n}\n\n.avator_box {\n    height: 130px;\n    width: 130px;\n    border: 1px solid #eee;\n    border-radius: 50%;\n    padding: 10px;\n    box-shadow: 0 0 10px #ddd;\n    position: absolute;\n    left: 50%;\n    top: -50%;\n    transform: translate(-50%, 50%);\n    background-color: #fff;\n    img {\n        width: 100%;\n        height: 100%;\n        border-radius: 50%;\n        background-color: #eee;\n    }\n}\n\n.login_form {\n    position: absolute;\n    bottom: 0;\n    width: 100%;\n    padding: 0 20px;\n    box-sizing: border-box;\n}\n\n.btns {\n    display: flex;\n    justify-content: flex-end;\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}