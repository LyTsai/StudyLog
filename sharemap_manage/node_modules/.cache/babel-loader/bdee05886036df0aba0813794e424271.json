{"ast":null,"code":"import \"core-js/modules/es.error.cause.js\";\n// import axios from 'axios'\nexport default {\n  data() {\n    return {\n      loginForm: {\n        username: '',\n        password: '' // grant_type: 'password'\n\n      },\n      loginFormRules: {\n        username: [{\n          required: true,\n          message: 'Please input valid account',\n          trigger: 'blur'\n        }],\n        password: [{\n          required: true,\n          message: 'Please input password',\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n\n  methods: {\n    resetLoginForm() {\n      this.$refs.loginFormRef.resetFields();\n    },\n\n    login() {\n      this.$refs.loginFormRef.validate(valid => {\n        if (!valid) return;\n        const loginUrl = 'https://annielyticx-gamedataauth.azurewebsites.net/oauth/token';\n        const body = 'username=' + this.loginForm.username + '&password=' + this.loginForm.password + '&grant_type=password';\n        fetch(loginUrl, {\n          method: 'post',\n          body: body,\n          headers: {\n            'Content-Type': 'application/x-www-form-urlencoded'\n          } // , mode: 'no-cors'\n\n        }).then(response => {\n          console.log(response);\n\n          if (!response.ok) {\n            throw new Error(response.status);\n          }\n\n          return response.json();\n        }).then(result => {\n          const token = result.access_token;\n          window.sessionStorage.setItem('token', token);\n          this.$router.push('/home');\n        }).catch(error => {\n          alert(error);\n        });\n      });\n    }\n\n  }\n};","map":{"version":3,"mappings":";AA6BA;AACA,eAAe;AACbA,MAAG,GAAK;AACN,WAAO;AACLC,eAAS,EAAE;AACTC,gBAAQ,EAAE,EADD;AAETC,gBAAQ,EAAE,EAFD,CAGT;;AAHS,OADN;AAMLC,oBAAc,EAAE;AACdF,gBAAQ,EAAE,CACR;AAAEG,kBAAQ,EAAE,IAAZ;AAAkBC,iBAAO,EAAE,4BAA3B;AAAyDC,iBAAO,EAAE;AAAlE,SADQ,CADI;AAIdJ,gBAAQ,EAAE,CACR;AAAEE,kBAAQ,EAAE,IAAZ;AAAkBC,iBAAO,EAAE,uBAA3B;AAAoDC,iBAAO,EAAE;AAA7D,SADQ;AAJI;AANX,KAAP;AAeD,GAjBY;;AAkBbC,SAAO,EAAE;AACPC,kBAAa,GAAK;AAChB,WAAKC,KAAL,CAAWC,YAAX,CAAwBC,WAAxB;AACD,KAHM;;AAIPC,SAAI,GAAK;AACP,WAAKH,KAAL,CAAWC,YAAX,CAAwBG,QAAxB,CAAiCC,KAAI,IAAK;AACxC,YAAI,CAACA,KAAL,EAAY;AAEZ,cAAMC,QAAO,GAAI,gEAAjB;AACA,cAAMC,IAAG,GAAI,cAAc,KAAKhB,SAAL,CAAeC,QAA7B,GAAwC,YAAxC,GAAuD,KAAKD,SAAL,CAAeE,QAAtE,GAAiF,sBAA9F;AACAe,aAAK,CAACF,QAAD,EAAW;AACdG,gBAAM,EAAE,MADM;AAEdF,cAAI,EAAEA,IAFQ;AAGdG,iBAAO,EAAE;AACP,4BAAgB;AADT,WAHK,CAMd;;AANc,SAAX,CAAL,CAOGC,IAPH,CAOQC,QAAO,IAAK;AAClBC,iBAAO,CAACC,GAAR,CAAYF,QAAZ;;AACA,cAAI,CAACA,QAAQ,CAACG,EAAd,EAAkB;AAChB,kBAAM,IAAIC,KAAJ,CAAUJ,QAAQ,CAACK,MAAnB,CAAN;AACF;;AACA,iBAAOL,QAAQ,CAACM,IAAT,EAAP;AACD,SAbD,EAaGP,IAbH,CAaQQ,MAAK,IAAK;AAChB,gBAAMC,KAAI,GAAID,MAAM,CAACE,YAArB;AACAC,gBAAM,CAACC,cAAP,CAAsBC,OAAtB,CAA8B,OAA9B,EAAuCJ,KAAvC;AACA,eAAKK,OAAL,CAAaC,IAAb,CAAkB,OAAlB;AACD,SAjBD,EAiBGC,KAjBH,CAiBSC,KAAI,IAAK;AAChBC,eAAK,CAACD,KAAD,CAAL;AACD,SAnBD;AAoBD,OAzBD;AA0BF;;AA/BO;AAlBI,CAAf","names":["data","loginForm","username","password","loginFormRules","required","message","trigger","methods","resetLoginForm","$refs","loginFormRef","resetFields","login","validate","valid","loginUrl","body","fetch","method","headers","then","response","console","log","ok","Error","status","json","result","token","access_token","window","sessionStorage","setItem","$router","push","catch","error","alert"],"sourceRoot":"","sources":["/Volumes/iMacDisk/Users/Shared/GitHub/StudyLog/sharemap_manage/src/views/LoginView.vue"],"sourcesContent":["<template>\n<div class=\"login_container\">\n  <div class=\"login_box\">\n    <!-- logo image -->\n    <div class=\"avator_box\">\n      <img src=\"../assets/logo.png\" alt=\"logo\">\n    </div>\n    <el-form ref=\"loginFormRef\" :model=\"loginForm\" :rules=\"loginFormRules\" label-width=\"0\" class=\"login_form\">\n      <!-- username -->\n      <el-form-item prop=\"username\">\n        <span>UserName</span>\n        <el-input v-model=\"loginForm.username\" placeholder=\"Please input Email adress\" :prefix-icon=\"Search\"/>\n      </el-form-item>\n        <!-- password -->\n      <el-form-item prop=\"password\">\n        <span>Password</span>\n        <el-input v-model=\"loginForm.password\" type=\"password\" placeholder=\"Please input password\" show-password :prefix-icon=\"icon-password\"/>\n      </el-form-item>\n        <!-- buttons -->\n      <el-form-item class=\"btns\">\n        <el-button type=\"primary\" @click=\"login\">Log In</el-button>\n        <el-button type=\"info\" @click=\"resetLoginForm\">Reset</el-button>\n      </el-form-item>\n    </el-form>\n  </div>\n</div>\n</template>\n\n<script>\n// import axios from 'axios'\nexport default {\n  data () {\n    return {\n      loginForm: {\n        username: '',\n        password: ''\n        // grant_type: 'password'\n      },\n      loginFormRules: {\n        username: [\n          { required: true, message: 'Please input valid account', trigger: 'blur' }\n        ],\n        password: [\n          { required: true, message: 'Please input password', trigger: 'blur' }\n        ]\n      }\n    }\n  },\n  methods: {\n    resetLoginForm () {\n      this.$refs.loginFormRef.resetFields()\n    },\n    login () {\n      this.$refs.loginFormRef.validate(valid => {\n        if (!valid) return\n\n        const loginUrl = 'https://annielyticx-gamedataauth.azurewebsites.net/oauth/token'\n        const body = 'username=' + this.loginForm.username + '&password=' + this.loginForm.password + '&grant_type=password'\n        fetch(loginUrl, {\n          method: 'post',\n          body: body,\n          headers: {\n            'Content-Type': 'application/x-www-form-urlencoded'\n          }\n          // , mode: 'no-cors'\n        }).then(response => {\n          console.log(response)\n          if (!response.ok) {\n            throw new Error(response.status)\n          }\n          return response.json()\n        }).then(result => {\n          const token = result.access_token\n          window.sessionStorage.setItem('token', token)\n          this.$router.push('/home')\n        }).catch(error => {\n          alert(error)\n        })\n      })\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.login_container {\n    background-color: #2b4b6b;\n    height: 100%;\n}\n\n.login_box {\n    width: 450px;\n    height: 300px;\n    background-color: white;\n    border-radius: 3px;\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    transform: translate(-50%, -50%);\n}\n\n.avator_box {\n    height: 130px;\n    width: 130px;\n    border: 1px solid #eee;\n    border-radius: 50%;\n    padding: 10px;\n    box-shadow: 0 0 10px #ddd;\n    position: absolute;\n    left: 50%;\n    top: -50%;\n    transform: translate(-50%, 50%);\n    background-color: #fff;\n    img {\n        width: 100%;\n        height: 100%;\n        border-radius: 50%;\n        background-color: #eee;\n    }\n}\n\n.login_form {\n    position: absolute;\n    bottom: 0;\n    width: 100%;\n    padding: 0 20px;\n    box-sizing: border-box;\n}\n\n.btns {\n    display: flex;\n    justify-content: flex-end;\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}